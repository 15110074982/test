<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title></title>
	</head>
	<body>
		<a>hello</a>
		<script src="js/jquery.js"></script>
		<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script>
	var url=window.location.href;
        var _url = url.split('/');
	for (var i = 0; i < _url.length; i++) {
		_url[i] = _url[i];
	};
	function kv(key){
	    var v = new RegExp("[?&]"+key+"\=([^&]+)", "g").exec(location.search);
	    if(v){return v[1];}else{return false;}
	}
	var code = kv('code');
		
		//if(code!=""||code!=false){
			//location.href='https://api.weixin.qq.com/sns/oauth2/access_token?appid=wx0e1ba933fe54edc1&secret=e2c86e0383c12966887b0a81f37e5da8&code='+code+'&grant_type=authorization_code'
			 var windowObj = window; // 可以是其他的 Window 对象的引用
			 var data = null;
			 
			addEventListener('message', function(e){
			   if(e.origin == 'https://api.weixin.qq.com/sns/oauth2/access_token?appid=wx0e1ba933fe54edc1&secret=e2c86e0383c12966887b0a81f37e5da8&code='+code+'&grant_type=authorization_code') {
			       data = e.data;
			 	alert（data）;
				   console.log(data);
			        e.source.postMessage('Got it!', '*');
			    }
                });      
		 	
		
		//}
	</script>
	</body>
</html>
